"Results Expected",
"All Results Expected",
"Date/Time"), as.character) %>%
mutate_at(c("U.S. FDA IND/IDE Information", "Locations in US",
"Plan to Share IPD?", "Available IPD/Information",
"Study Documents", "Unreported Primary Outcomes",
"Unreported Secondary Outcomes", "Review Comments Status"),
~replace(., !is.na(.), NA)) %>%
mutate("Public Site Status" =
ifelse("Public Site Status" ==
"No longer public [duplicate of NCT03047213]",
"No longer public",
"Public Site Status")) %>%
ungroup()
Anon_record_info <- record_info_sample3 %>%
select(-c("Record Type", Event, "User/Reviewer", "Date/Time")) %>%
distinct() %>%
mutate("Protocol ID" = as.character(`Protocol ID`)) %>%
# reorder
select("Protocol ID":"Last Release",
"Record Owner", "Last Updater", "Responsible Party", "Central Contacts",
everything())
Anon_review_history <- record_info_sample3 %>%
select("Protocol ID", "ClinicalTrials.gov ID", "Record Type", Event, "User/Reviewer", "Date/Time") %>%
filter(!is.na("User/Reviewer")) %>%
mutate("Protocol ID" = as.character(`Protocol ID`))
write.csv(Anon_record_info, file = "Anon_record_info.csv", row.names = F, na = "")
write.csv(Anon_review_history, file = "Anon_review_history.csv", row.names = F, na = "")
runApp()
# (randomly) edit dates(?)
parse <- function(x)
lubridate::parse_date_time(x,
orders = c("ymd", "m/y", "m/d/y", "%m/%d/%y %H:%M"))
add_mo <- function(x)
(x + lubridate::days(5) + lubridate::dmonths(6))
record_info_sample3 <- record_info_sample2 %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected",
"Date/Time"), parse)  %>%
group_by(`Protocol ID`) %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected",
"Date/Time"), add_mo) %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected"), as.Date, format = "%m/%d/%Y") %>%
mutate("Date/Time" = strftime(`Date/Time`, format = "%m/%d/%Y %H:%M")) %>%
filter(lubridate::year(`Start Date`) > 2008) %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected",
"Date/Time"), as.character) %>%
mutate_at(c("U.S. FDA IND/IDE Information", "Locations in US",
"Plan to Share IPD?", "Available IPD/Information",
"Study Documents", "Unreported Primary Outcomes",
"Unreported Secondary Outcomes", "Review Comments Status"),
~replace(., !is.na(.), NA)) %>%
mutate("Public Site Status" =
ifelse("Public Site Status" ==
"No longer public [duplicate of NCT03047213]",
"No longer public",
"Public Site Status")) %>%
ungroup() #%>%
Anon_record_info <- record_info_sample3 %>%
select(-c("Record Type", Event, "User/Reviewer", "Date/Time")) %>%
distinct() %>%
mutate("Protocol ID" = as.character(`Protocol ID`)) %>%
# reorder
select("Protocol ID":"Last Release",
"Record Owner", "Last Updater", "Responsible Party", "Central Contacts",
everything())
Anon_review_history <- record_info_sample3 %>%
select("Protocol ID", "ClinicalTrials.gov ID", "Record Type", Event, "User/Reviewer", "Date/Time") %>%
filter(!is.na("User/Reviewer")) %>%
mutate("Protocol ID" = as.character(`Protocol ID`))
record_info_sample3 <- record_info_sample2 %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected",
"Date/Time"), parse)  %>%
group_by(`Protocol ID`) %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected",
"Date/Time"), add_mo) %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected"), strftime, format = "%m/%d/%Y") %>%
mutate("Date/Time" = strftime(`Date/Time`, format = "%m/%d/%Y %H:%M")) %>%
filter(lubridate::year(`Start Date`) > 2008) %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected",
"Date/Time"), as.character) %>%
mutate_at(c("U.S. FDA IND/IDE Information", "Locations in US",
"Plan to Share IPD?", "Available IPD/Information",
"Study Documents", "Unreported Primary Outcomes",
"Unreported Secondary Outcomes", "Review Comments Status"),
~replace(., !is.na(.), NA)) %>%
mutate("Public Site Status" =
ifelse("Public Site Status" ==
"No longer public [duplicate of NCT03047213]",
"No longer public",
"Public Site Status")) %>%
ungroup() #%>%
record_info_sample3 <- record_info_sample2 %>%
filter(lubridate::year(`Start Date`) > 2008) %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected",
"Date/Time"), parse)  %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected",
"Date/Time"), add_mo) %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected"), strftime, format = "%m/%d/%Y") %>%
mutate("Date/Time" = strftime(`Date/Time`, format = "%m/%d/%Y %H:%M")) %>%
mutate_at(c("U.S. FDA IND/IDE Information", "Locations in US",
"Plan to Share IPD?", "Available IPD/Information",
"Study Documents", "Unreported Primary Outcomes",
"Unreported Secondary Outcomes", "Review Comments Status"),
~replace(., !is.na(.), NA)) %>%
mutate("Public Site Status" =
ifelse("Public Site Status" ==
"No longer public [duplicate of NCT03047213]",
"No longer public",
"Public Site Status")) %>%
ungroup() #%>%
record_info_sample3 <- record_info_sample2 %>%
#filter(lubridate::year(`Start Date`) > 2008) %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected",
"Date/Time"), parse)  %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected",
"Date/Time"), add_mo) %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected"), strftime, format = "%m/%d/%Y") %>%
mutate("Date/Time" = strftime(`Date/Time`, format = "%m/%d/%Y %H:%M")) %>%
mutate_at(c("U.S. FDA IND/IDE Information", "Locations in US",
"Plan to Share IPD?", "Available IPD/Information",
"Study Documents", "Unreported Primary Outcomes",
"Unreported Secondary Outcomes", "Review Comments Status"),
~replace(., !is.na(.), NA)) %>%
mutate("Public Site Status" =
ifelse("Public Site Status" ==
"No longer public [duplicate of NCT03047213]",
"No longer public",
"Public Site Status")) %>%
ungroup() #%>%
Anon_record_info <- record_info_sample3 %>%
select(-c("Record Type", Event, "User/Reviewer", "Date/Time")) %>%
distinct() %>%
mutate("Protocol ID" = as.character(`Protocol ID`)) %>%
# reorder
select("Protocol ID":"Last Release",
"Record Owner", "Last Updater", "Responsible Party", "Central Contacts",
everything())
Anon_review_history <- record_info_sample3 %>%
select("Protocol ID", "ClinicalTrials.gov ID", "Record Type", Event, "User/Reviewer", "Date/Time") %>%
filter(!is.na("User/Reviewer")) %>%
mutate("Protocol ID" = as.character(`Protocol ID`))
Anon_record_info <- record_info_sample3 %>%
select(-c("Record Type", Event, "User/Reviewer", "Date/Time")) %>%
distinct() %>%
mutate("Protocol ID" = as.character(`Protocol ID`)) %>%
# reorder
select("Protocol ID":"Last Release",
"Record Owner", "Last Updater", "Responsible Party", "Central Contacts",
everything()) %>%
filter(lubridate::year(`Start Date`) > 2008)
Anon_record_info <- record_info_sample3 %>%
select(-c("Record Type", Event, "User/Reviewer", "Date/Time")) %>%
distinct() %>%
mutate("Protocol ID" = as.character(`Protocol ID`)) %>%
# reorder
select("Protocol ID":"Last Release",
"Record Owner", "Last Updater", "Responsible Party", "Central Contacts",
everything()) %>%
filter(lubridate::year(as.POSIXct(`Start Date`)) > 2008)
as.POSIXct()
?as.POSIXct()
Anon_record_info <- record_info_sample3 %>%
select(-c("Record Type", Event, "User/Reviewer", "Date/Time")) %>%
distinct() %>%
mutate("Protocol ID" = as.character(`Protocol ID`)) %>%
# reorder
select("Protocol ID":"Last Release",
"Record Owner", "Last Updater", "Responsible Party", "Central Contacts",
everything()) %>%
filter(lubridate::year(as.POSIXlt(`Start Date`)) > 2008)
Anon_record_info <- record_info_sample3 %>%
select(-c("Record Type", Event, "User/Reviewer", "Date/Time")) %>%
distinct() %>%
mutate("Protocol ID" = as.character(`Protocol ID`)) %>%
# reorder
select("Protocol ID":"Last Release",
"Record Owner", "Last Updater", "Responsible Party", "Central Contacts",
everything()) %>%
filter(lubridate::year(as.Date(`Start Date`)) > 2008)
record_info_sample3 <- record_info_sample2 %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected",
"Date/Time"), parse)  %>%
filter(lubridate::year(`Start Date`) > 2008) %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected",
"Date/Time"), add_mo) %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected"), strftime, format = "%m/%d/%Y") %>%
mutate("Date/Time" = strftime(`Date/Time`, format = "%m/%d/%Y %H:%M")) %>%
mutate_at(c("U.S. FDA IND/IDE Information", "Locations in US",
"Plan to Share IPD?", "Available IPD/Information",
"Study Documents", "Unreported Primary Outcomes",
"Unreported Secondary Outcomes", "Review Comments Status"),
~replace(., !is.na(.), NA)) %>%
mutate("Public Site Status" =
ifelse("Public Site Status" ==
"No longer public [duplicate of NCT03047213]",
"No longer public",
"Public Site Status")) %>%
ungroup()
record_info_sample3 <- record_info_sample2 %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected",
"Date/Time"), parse)  %>%
filter(lubridate::year(`Start Date`) > 2012) %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected",
"Date/Time"), add_mo) %>%
mutate_at(c("Start Date",
"Primary Completion Date",
"Study Completion Date",
"Initial Release",
"Initial Results Release",
"Initial Delayed Results Release",
"Verification Date",
"Last Update",
"Last Release",
"Initial Public Release",
"Last Public Release",
"Update Expected",
"Corrections Expected",
"Results Expected",
"All Results Expected"), strftime, format = "%m/%d/%Y") %>%
mutate("Date/Time" = strftime(`Date/Time`, format = "%m/%d/%Y %H:%M")) %>%
mutate_at(c("U.S. FDA IND/IDE Information", "Locations in US",
"Plan to Share IPD?", "Available IPD/Information",
"Study Documents", "Unreported Primary Outcomes",
"Unreported Secondary Outcomes", "Review Comments Status"),
~replace(., !is.na(.), NA)) %>%
mutate("Public Site Status" =
ifelse("Public Site Status" ==
"No longer public [duplicate of NCT03047213]",
"No longer public",
"Public Site Status")) %>%
ungroup()
Anon_record_info <- record_info_sample3 %>%
select(-c("Record Type", Event, "User/Reviewer", "Date/Time")) %>%
distinct() %>%
mutate("Protocol ID" = as.character(`Protocol ID`)) %>%
# reorder
select("Protocol ID":"Last Release",
"Record Owner", "Last Updater", "Responsible Party", "Central Contacts",
everything())
Anon_review_history <- record_info_sample3 %>%
select("Protocol ID", "ClinicalTrials.gov ID", "Record Type", Event, "User/Reviewer", "Date/Time") %>%
filter(!is.na("User/Reviewer")) %>%
mutate("Protocol ID" = as.character(`Protocol ID`))
write.csv(Anon_record_info, file = "Anon_record_info.csv", row.names = F, na = "")
write.csv(Anon_review_history, file = "Anon_review_history.csv", row.names = F, na = "")
runApp()
